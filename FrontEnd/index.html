<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Easy Car Rental Service</title>
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <script src="https://kit.fontawesome.com/97dbc65e21.js" crossorigin="anonymous"></script>

    <style>

        *{
            scroll-behavior: smooth;
            transition: all 1s;
        }
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap');
        body{
            background: #4b4b4b;
            font-family: 'Roboto', sans-serif;
        }
        .card{
            width: 250px;
            border-radius: 10px;
        }

        .card-img-top{
            border-top-right-radius: 10px;
            border-top-left-radius: 10px;
        }
        span.text-muted{
            font-size: 12px;
        }
        small.text-muted{
            font-size: 8px;
        }
        h5.mb-0{
            font-size: 1rem;
        }
        small.ghj{
            font-size: 9px;
        }
        h6.ml-1{
            font-size: 13px;
        }
        small.key{
            text-decoration: underline;
            font-size: 9px;
            cursor: pointer;
        }
        .btn-danger{
            color: #FFCBD2;
        }
        .btn-danger:focus{
            box-shadow: none;
        }
        small.justify-content-center{
            font-size: 9px;
            cursor: pointer;
            text-decoration: underline;
        }

        @media screen and (max-width:600px){
            .col-sm-4{
                margin-bottom: 50px;
            }
        }

        #welcomeScreen{
            width: 100%;
        }

        .jumbotron{
            background-image: url("assets/images/bg.jpg");
            background-size: cover;
            color: white;
        }

        .login-form{
            background: rgba(0, 0, 0, 0.62);
            border-radius: 15px;
        }

        .login-box{
            /*display: none;*/
        }

        .profile-box{
            display: none;
        }

        .settings-content{
            background-image: url("assets/images/bg.jpg");
            background-size: cover;
            color: white;
        }

        .booking-content{
            background-image: url("assets/images/bg.jpg");
            background-size: cover;
            color: white;
        }


        .car-cards{
            display: grid;
            grid-template-columns: repeat(4, 1fr);

            grid-auto-rows: auto;

            grid-gap: 1rem;
        }

        #btnProfile{
            display: none;
        }

        #driverDashboardContext{
            height: 85vh;
            background-image: url("assets/images/bg.jpg");
            background-size: cover;
            color: white;
            display: none;
        }

    </style>

</head>
<body>

<!--HomePage-->
<div id="homePageContext">

    <!--navBar-->
    <nav class="navbar navbar-expand-lg navbar-light bg-warning">
        <div class="container">
            <a class="navbar-brand" href="#"><img src="assets/images/LogoBlack.png" width="200" alt=""></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarText">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="#">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#contact">Contact Us</a>
                    </li>
                    <li class="nav-item dropdown profile-link">
                        <button type="button" class="btn btn-dark" id="btnProfile" data-toggle="modal" data-target=".bd-settings-modal-lg">:UserName:</button>
                    </li>
                </ul>
                <span class="navbar-text">
                    <i class="fa-solid fa-phone-volume"></i>
                    011-2332331<br>
                    <i class="fa-solid fa-envelope"></i>
                    contact@easycar.lk
                </span>
            </div>
        </div>
    </nav>

    <!--Warning Box-->
    <div class="modal fade" id="warningModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="txtWarningHeader">Warning!</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="txtWarning">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-warning" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!--Profile Modal-->
    <div class=" modal fade bd-settings-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="settings-content modal-content">
                <div class="container">
                    <div class="mt-lg-4 mb-lg-4">
                        <h1 class="text-warning">Settings</h1>
                        <form action="#" method="post" enctype="multipart/form-data">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="cus_name" class="form-label">Name</label>
                                        <input type="text" class="form-control" id="cus_name" name="cus_name" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="cus_nic" class="form-label">NIC Number</label>
                                        <input type="text" class="form-control" id="cus_nic" name="cus_nic" disabled>
                                    </div>
                                    <div class="mb-3">
                                        <label for="cus_address" class="form-label">Address</label>
                                        <textarea class="form-control" id="cus_address" name="cus_address" rows="3" required></textarea>
                                    </div>
                                    <div class="mb-3">
                                        <label for="cus_contact" class="form-label">Phone Number</label>
                                        <input type="tel" class="form-control" id="cus_contact" name="cus_contact" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="cus_email" class="form-label">Email address</label>
                                        <input type="email" class="form-control" id="cus_email" name="cus_email" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="set-username" class="form-label">Username</label>
                                        <input type="text" class="form-control" id="set-username" name="set-username" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="set-password" class="form-label">Password</label>
                                        <input type="password" class="form-control" id="set-password" name="set-password" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="nic_photo" class="form-label">NIC Photo</label>
                                        <input class="form-control" type="file" id="nic_photo" name="nic_photo" accept="image/*" required>
                                        <small class="form-text text-muted">Please upload a photo of your NIC or Driving License.</small>
                                    </div>
                                </div>
                            </div>
                            <button type="button" class="btn btn-warning font-weight-bold" id="btnCusSettingsSave">Save</button>
                            <a class="btn btn-danger" href="index.html">Logout</a>
                        </form>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--Booking Modal-->
    <div class="modal fade bd-booking-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="booking-content modal-content">
                <div class="container">
                    <div class="mt-lg-4 mb-lg-4">
                <h1 class="text-warning font-weight-bold">Booking</h1>
                <form action="#" method="post" enctype="multipart/form-data">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="bk_id" class="form-label">Booking ID:</label>
                                <input type="text" class="form-control" id="bk_id" name="bk_id" required>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="bk_cusNic" class="form-label">Customer NIC:</label>
                                <input type="text" class="form-control" id="bk_cusNic" name="bk_cusNic" disabled required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="bk_cus" class="form-label">Customer Name:</label>
                                <input type="text" class="form-control" id="bk_cus" name="bk_cus" disabled required>
                            </div>
                        </div>
                        </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="bk_carreg" class="form-label">Car Registration:</label>
                                <input class="form-control" id="bk_carreg" name="bk_carreg" disabled required></input>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="bk_carmake" class="form-label">Brand:</label>
                                <input class="form-control" id="bk_carmake" name="bk_carmake" disabled required></input>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="bk_carmodel" class="form-label">Model:</label>
                                <input class="form-control" id="bk_carmodel" name="bk_carmodel" disabled required></input>
                            </div>
                        </div>
                        </div>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="bk_date" class="form-label">Rent Date:</label>
                                <input type="date" class="form-control" id="bk_date" name="bk_date" required>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="bk_ndate" class="form-label">End Date:</label>
                                <input type="date" class="form-control" id="bk_ndate" name="bk_ndate" required>
                            </div>
                        </div>
                        <div class="col-md-3"></div>
                        <div class="col-md-3">
                                <div class="mb-3">
                                    <label for="bk_total" class="form-label">Total Rental/Rs:</label>
                                    <input type="text" class="form-control bg-dark text-light border-danger font-weight-bold" id="bk_total" name="bk_total" required placeholder="0.00">
                                    <small>Without Extra KM</small>
                                </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-warning font-weight-bold" id="btnBookingSubmit">Submit</button>
                </form>
                </div>
                </div>
            </div>
        </div>
    </div>

    <!--Welcome Screen-->
    <div id="welcomeScreen" >
        <div class="jumbotron">
            <div class="container">
                <div class="row">
                    <div class="col-md-8">
                        <h1 class="display-4">Rent Your Dream Car Today</h1>
                        <p class="lead">
                            We offer a hassle free car rental service. Book your car online.
                        </p>
                        <hr class="my-4" />
                        <p>Choose from our wide range of cars and start your journey today.</p>
                        <a class="btn btn-outline-warning btn-lg" href="#cars" role="button">Book Now</a>
                    </div>
    <!--Login Form-->
                    <div class="col-md-4 login-box">
                        <div class="login-form p-lg-4 border border-warning">
                        <form>
                            <h2 class="text-center">Login</h2>
                            <div class="form-group">
                                <label for="email">Username</label>
                                <input type="text" class="form-control" id="username" placeholder="Nic/Lic">
                            </div>
                            <div class="form-group">
                                <label for="password">Password</label>
                                <input type="password" class="form-control" id="password" placeholder="Password">
                            </div>
                            <button type="button" class="btn btn-warning" id="btnLogin">Login</button>
                            <small>Don't have an account? <a href="register.html" class="text-warning">Register</a></small>
                        </form>
                        </div>
                    </div>
                </div>


            </div>
        </div>
    </div>

    <!--CarList-->
    <div class="container-fluid d-flex justify-content-center" id="cars">
        <div class="mt-4 car-cards" id="cardCars">
            <div class=" mb-4">
                <div class="card">
                    <img src="assets/images/Genaral/alto-m/1.png" class="card-img-top" width="100%">
                    <div class="card-body pt-0 px-0">
                        <div class="d-flex flex-row justify-content-between mb-0 px-3 mt-1">
                            <div class="d-flex flex-column"><span class="text-muted">Price Per Day:<br><small class="text-muted">100KM</small></span></span></div>
                            <h6>Rs2,500</h6>
                        </div>
                        <div class="d-flex flex-row justify-content-between mb-0 px-3">
                            <div class="d-flex flex-column"><span class="text-muted">Price Per Month:<br><small class="text-muted">2400KM</small></span></div>
                            <h6>Rs64,350</h6>
                        </div>
                        <div class="d-flex flex-row justify-content-between mb-0 px-3">
                            <div class="d-flex flex-column"><span class="text-muted">Price Per extra KM:</span></div>
                            <h6>Rs30</h6>
                        </div>
                        <hr class="mt-2 mx-3">
                        <div class="d-flex flex-row justify-content-between px-3">
                            <div class="d-flex flex-column"><span class="text-muted">Brand:</span></div>
                            <div class="d-flex flex-column"><h5 class="mb-0">Suzuki</h5></div>
                        </div>
                        <div class="d-flex flex-row justify-content-between px-3 ">
                            <div class="d-flex flex-column"><span class="text-muted">Model:</span></div>
                            <div class="d-flex flex-column"><h5 class="mb-0">Alto</h5></div>
                        </div>
                        <div class="d-flex flex-row justify-content-between px-3 ">
                            <div class="d-flex flex-column"><span class="text-muted">No of passengers:</span></div>
                            <div class="d-flex flex-column"><h5 class="mb-0">4</h5></div>
                        </div>
                        <div class="d-flex flex-row justify-content-between px-3 ">
                            <div class="d-flex flex-column"><span class="text-muted">Transmission type:</span></div>
                            <div class="d-flex flex-column"><h5 class="mb-0">Auto</h5></div>
                        </div>
                        <div class="d-flex flex-row justify-content-between px-3 ">
                            <div class="d-flex flex-column"><span class="text-muted">Fuel type:</span></div>
                            <div class="d-flex flex-column"><h5 class="mb-0">Petrol</h5></div>
                        </div>
                        <section>
                        <div class="mx-3 mt-3 mb-2">
                            <button type="submit" class="btnRent btn btn-warning btn-block">Rent</button>
                        </div>
                        <small class="d-flex justify-content-center text-muted">KL-1234</small>
                        </section>
                    </div>
                </div>

            </div>

            </div>
                </div>

    <section id="contact" class="py-5 bg-dark">
        <div class="container">
            <h2 class="text-center text-light">Contact Us</h2>
            <hr />
            <div class="row">
                <div class="col-md-6">
                    <form>
                        <div class="form-group">
                            <label for="name" class="text-light">Name</label>
                            <input type="text" class="form-control" id="name" />
                        </div>
                        <div class="form-group">
                            <label for="email" class="text-light">Email</label>
                            <input type="email" class="form-control" id="email" />
                        </div>
                        <div class="form-group">
                            <label for="message" class="text-light">Message</label>
                            <textarea class="form-control" id="message" rows="3"></textarea>
                        </div>
                        <button type="submit" class="btn btn-warning">Submit</button>
                    </form>
                </div>
                <div class="col-md-6">
                    <iframe
                            src="https://maps.google.com/maps?q=easy car rental&t=&z=10&ie=UTF8&iwloc=&output=embed"frameborder="0" scrolling="no" marginheight="0" marginwidth="0"
                            class="h-100 w-100" style="border:0;" allowfullscreen="" loading="lazy">

                    </iframe>
                </div>
            </div>
        </div>
    </section>
</div>

<!--Driver Dashboard-->
 <div id="driverDashboardContext" class="bg-light">
    <nav class="navbar shadow-sm navbar-expand-lg navbar-light bg-warning">
        <div class="container">
            <a class="navbar-brand" href="#"><img src="assets/images/LogoBlack.png" width="200" alt=""></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav mr-auto">
                </ul>
                <span class="navbar-text" id="lblDriverName">
                <i class="fa-solid fa-user"></i>
                Driver
            </span>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="mt-md-4 mb-md-4">
            <h1 class="text-warning font-weight-bold">Driver Dashboard</h1>
            <table class="table shadow table-light">
                <thead class="thead-dark">
                <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Cus-NIC</th>
                    <th scope="col">Cus-Name</th>
                    <th scope="col">Car-No</th>
                    <th scope="col">Car Make</th>
                    <th scope="col">Car Model</th>
                    <th scope="col">Start Date</th>
                    <th scope="col">End Date</th>
                    <th scope="col">Total</th>
                    <th scope="col">Option</th>
                </tr>
                </thead>
                <tbody id="tblDriverSchedule">
                <tr>
                    <td>BK-001</td>
                    <td>200113203389</td>
                    <td>Saman Kumara</td>
                    <td>KL-1234</td>
                    <td>BMW</td>
                    <td>M5 / Auto</td>
                    <td>2023-02-15</td>
                    <td>2023-03-16</td>
                    <td>186000</td>
                    <td><button class="btn-sm btn-success btnGetJob">Get Job</button></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!--Footer-->
<footer class="bg-warning py-3">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <p>&copy; 2023 Car Rental Service</p>
            </div>
            <div class="col-md-6">
                <ul class="list-inline float-md-right">
                    <li class="list-inline-item">
                        <a href="#" class="text-dark">Terms of Use</a>
                    </li>
                    <li class="list-inline-item">
                        <a href="#" class="text-dark">Privacy Policy</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>

<script src="assets/js/jquery-3.6.1.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>

<script>
    let baseURL = "http://localhost:8080/BackEnd_war/"
    let originUserId = null;

    getCarsForCards();
    rentModalOpen();



    function rentModalOpen(){
        $(".btnRent").click(function (){
            let car_regno = $(this).closest('section').find('small:first').text();


            $.ajax({
                url: baseURL+"car/getcar?cr_reg="+car_regno,
                method: "get",
                dataType:"json",
                success:function (res){
                    $("#bk_carreg").val(car_regno);
                    $("#bk_carmake").val(res.data.cr_make);
                    $("#bk_carmodel").val(res.data.cr_model);
                    $("#bk_carmake").val(res.data.cr_make);
                    $("#bk_carmake").val(res.data.cr_make);
                    $("#bk_carmake").val(res.data.cr_make);
                    $("#bk_carmake").val(res.data.cr_make);
                }
            })

            $('.bd-booking-modal-lg').modal();
        });
    }



    $("#btnLogin").click(function (){

        var loginObj = {
            userName: $("#username").val(),
            password: $("#password").val(),
            role: null,
            userId: null
        }

        $.ajax({
            url: baseURL + "login/user",
            method: "post",
            data: JSON.stringify(loginObj),
            contentType: "application/json",
            dataType: "json",
            success: function (res) {
                if (res.data.role == "Customer"){
                    $.ajax({
                        url: baseURL + "login/customer?userId=" + res.data.userId,
                        method: "get",
                        success: function (res) {
                            originUserId = res.data.userId;

                            $("#warningModal").modal();
                            $("#txtWarningHeader").text("Success");
                            $("#txtWarning").text(res.message+"! Welcome "+res.data.cus_name);

                            console.log("Success : " + res.data.cus_name);

                            $("#btnProfile").css('display', 'block');
                            $("#btnProfile").text(res.data.cus_name);

                            $("#cus_nic").val(res.data.cus_nic);
                            $("#cus_name").val(res.data.cus_name);
                            $("#cus_address").val(res.data.cus_address);
                            $("#cus_contact").val(res.data.cus_contact);
                            $("#cus_email").val(res.data.cus_email);

                            $("#set-username").val(loginObj.userName);
                            $("#set-password").val(loginObj.password);

                            $(".login-box").css('display', 'none');
                        },
                        error: function (err){
                            let message = JSON.parse(err.responseText).message;
                            $("#warningModal").modal();
                            $("#txtWarningHeader").text("Error");
                            $("#txtWarning").text(message);

                            console.log("Error : " + message)
                        }
                    });
                }if (res.data.role == "Driver"){

                    $.ajax({
                       url: baseURL+"login/driverinfo?userId="+res.data.userId,
                        method: "get",
                        success: function (res) {
                           $("#lblDriverName").text(res.data.dr_name);
                        }
                    });

                    $("#driverDashboardContext").css('display' , 'block');
                    $("#homePageContext").css('display' , 'none');

                }if (res.data.role == "Admin"){
                    $.ajax({
                        url: baseURL + "login/admin?userId=" + res.data.userId,
                        method: "post",
                        success: function (res) {

                            console.log("Success : " + res.data.adminName);

                            $("#warningModal").modal();
                            $("#txtWarningHeader").text("Success");
                            $("#txtWarning").text("Welcome "+res.data.adminName);

                            $(location).attr('href', 'adminDashboard.html');
                        },
                        error: function (err){
                            let message = JSON.parse(err.responseText).message;
                            $("#warningModal").modal();
                            $("#txtWarningHeader").text("Error");
                            $("#txtWarning").text(message);

                            console.log("Error : " + message)
                        }
                    });
                }

            },
            error: function (err) {
                let message = JSON.parse(err.responseText).message;
                $("#warningModal").modal();
                $("#txtWarningHeader").text("Error");
                $("#txtWarning").text(message);

                console.log("Error : " + message)
            }
        });

    });

    function getCarsForCards(){
        $("#cardCars").empty();
        $.ajax({
            url: baseURL + "car/allcar",
            method: 'get',
            dataType: 'json',
            success: function (res) {
                for (let c of res.data) {
                    let carReg = c.cr_reg;
                    let carMake = c.cr_make;
                    let carModel = c.cr_model;
                    let carType = c.cr_type;
                    let carFuel = c.cr_fuel;
                    let carNfp = c.cr_nfp;
                    let carDay = c.cr_day;
                    let carMonth = c.cr_month;
                    let carKm = c.cr_km;
                    let carAvail = c.cr_avail;

                    if (carType == "General"){
                        let card ="<div class='mb-4'><div class='card'><img src='assets/images/Genaral/alto-m/4.png' class='card-img-top' width='100%'><div class='card-body pt-0 px-0'><div class='d-flex flex-row justify-content-between mb-0 px-3 mt-1'><div class='d-flex flex-column'><span class='text-muted'>Price Per Day:<br><small class='text-muted'>100KM</small></span></span></div><h6>RS:"+carDay+"/=</h6></div><div class='d-flex flex-row justify-content-between mb-0 px-3'><div class='d-flex flex-column'><span class='text-muted'>Price Per Month:<br><small class='text-muted'>2400KM</small></span></div><h6>RS:"+carMonth+"/=</h6></div><div class='d-flex flex-row justify-content-between mb-0 px-3'><div class='d-flex flex-column'><span class='text-muted'>Price Per extra KM:</span></div><h6>RS:"+carKm+"/=</h6></div><hr class=mt-2 mx-3'><div class='d-flex flex-row justify-content-between px-3'><div class='d-flex flex-column'><span class='text-muted'>Brand:</span></div><div class='d-flex flex-column'><h5 class='mb-0'>"+ carMake +"</h5></div></div><div class='d-flex flex-row justify-content-between px-3'><div class='d-flex flex-column'><span class='text-muted'>Model:</span></div><div class='d-flex flex-column'><h5 class='mb-0'>"+carModel+"</h5></div></div><div class='d-flex flex-row justify-content-between px-3'><div class='d-flex flex-column'><span class='text-muted'>No of passengers:</span></div><div class='d-flex flex-column'><h5 class='mb-0'>"+carNfp+"</h5></div></div><div class='d-flex flex-row justify-content-between px-3'><div class='d-flex flex-column'><span class='text-muted'>Fuel type:</span></div><div class='d-flex flex-column'><h5 class='mb-0'>"+carFuel+"</h5></div></div><section><div class='mx-3 mt-3 mb-2'><button type='button' class='btnRent btn btn-warning btn-block'>Rent</button></div><small class='d-flex justify-content-center text-muted'>"+carReg+"</small></section></div></div></div>";
                        $("#cardCars").append(card);
                    }if (carType == "Premium"){
                        let card ="<div class='mb-4'><div class='card'><img src='assets/images/Premium/allion/3.png' class='card-img-top' width='100%'><div class='card-body pt-0 px-0'><div class='d-flex flex-row justify-content-between mb-0 px-3 mt-1'><div class='d-flex flex-column'><span class='text-muted'>Price Per Day:<br><small class='text-muted'>100KM</small></span></span></div><h6>RS:"+carDay+"/=</h6></div><div class='d-flex flex-row justify-content-between mb-0 px-3'><div class='d-flex flex-column'><span class='text-muted'>Price Per Month:<br><small class='text-muted'>2400KM</small></span></div><h6>RS:"+carMonth+"/=</h6></div><div class='d-flex flex-row justify-content-between mb-0 px-3'><div class='d-flex flex-column'><span class='text-muted'>Price Per extra KM:</span></div><h6>RS:"+carKm+"/=</h6></div><hr class=mt-2 mx-3'><div class='d-flex flex-row justify-content-between px-3'><div class='d-flex flex-column'><span class='text-muted'>Brand:</span></div><div class='d-flex flex-column'><h5 class='mb-0'>"+ carMake +"</h5></div></div><div class='d-flex flex-row justify-content-between px-3'><div class='d-flex flex-column'><span class='text-muted'>Model:</span></div><div class='d-flex flex-column'><h5 class='mb-0'>"+carModel+"</h5></div></div><div class='d-flex flex-row justify-content-between px-3'><div class='d-flex flex-column'><span class='text-muted'>No of passengers:</span></div><div class='d-flex flex-column'><h5 class='mb-0'>"+carNfp+"</h5></div></div><div class='d-flex flex-row justify-content-between px-3'><div class='d-flex flex-column'><span class='text-muted'>Fuel type:</span></div><div class='d-flex flex-column'><h5 class='mb-0'>"+carFuel+"</h5></div></div><section><div class='mx-3 mt-3 mb-2'><button type='button' class='btnRent btn btn-warning btn-block'>Rent</button></div><small class='d-flex justify-content-center text-muted'>"+carReg+"</small></section></div></div></div>";
                        $("#cardCars").append(card);
                    }if (carType == "Luxury"){
                        let card ="<div class='mb-4'><div class='card'><img src='assets/images/Luxury/i8/2.png' class='card-img-top' width='100%'><div class='card-body pt-0 px-0'><div class='d-flex flex-row justify-content-between mb-0 px-3 mt-1'><div class='d-flex flex-column'><span class='text-muted'>Price Per Day:<br><small class='text-muted'>100KM</small></span></span></div><h6>RS:"+carDay+"/=</h6></div><div class='d-flex flex-row justify-content-between mb-0 px-3'><div class='d-flex flex-column'><span class='text-muted'>Price Per Month:<br><small class='text-muted'>2400KM</small></span></div><h6>RS:"+carMonth+"/=</h6></div><div class='d-flex flex-row justify-content-between mb-0 px-3'><div class='d-flex flex-column'><span class='text-muted'>Price Per extra KM:</span></div><h6>RS:"+carKm+"/=</h6></div><hr class=mt-2 mx-3'><div class='d-flex flex-row justify-content-between px-3'><div class='d-flex flex-column'><span class='text-muted'>Brand:</span></div><div class='d-flex flex-column'><h5 class='mb-0'>"+ carMake +"</h5></div></div><div class='d-flex flex-row justify-content-between px-3'><div class='d-flex flex-column'><span class='text-muted'>Model:</span></div><div class='d-flex flex-column'><h5 class='mb-0'>"+carModel+"</h5></div></div><div class='d-flex flex-row justify-content-between px-3'><div class='d-flex flex-column'><span class='text-muted'>No of passengers:</span></div><div class='d-flex flex-column'><h5 class='mb-0'>"+carNfp+"</h5></div></div><div class='d-flex flex-row justify-content-between px-3'><div class='d-flex flex-column'><span class='text-muted'>Fuel type:</span></div><div class='d-flex flex-column'><h5 class='mb-0'>"+carFuel+"</h5></div></div><section><div class='mx-3 mt-3 mb-2'><button type='button' class='btnRent btn btn-warning btn-block'>Rent</button></div><small class='d-flex justify-content-center text-muted'>"+carReg+"</small></section></div></div></div>";
                        $("#cardCars").append(card);
                    }

                }
                rentModalOpen();

            },
            error: function (error) {
                let message = JSON.parse(error.responseText).message;
                alert(message);
            }
        });
    }

    $("#btnBookingSubmit").click(function (){
        var startDate = new Date($('#bk_date').val());
        var endDate = new Date($('#bk_ndate').val());

        var days = Math.floor((endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24));

        console.log('Number of days between the two dates: ' + days);
    });

    $("#btnCusSettingsSave").click(function (){
        let cusDataObj = {
            cus_nic: $("#cus_nic").val(),
            cus_name: $("#cus_name").val(),
            cus_address: $("#cus_address").val(),
            cus_contact: $("#cus_contact").val(),
            cus_email: $("#cus_email").val()
        };

        let cusLoginDataObj = {
            userId: originUserId,
            userName: $("#set-username").val,
            password: $("#set-password").val,
            role: "Customer"

        }

        $.ajax({
            url: baseURL + "customer/update",
            method: "PUT",
            data: JSON.stringify(cusDataObj),
            contentType: "application/json",
            dataType: "json",
            success: function (res) {

                // Customer Username Password Update
                // $.ajax({
                //     url: baseURL + "register/updatecus",
                //     method: "PUT",
                //     data: JSON.stringify(cusLoginDataObj),
                //     contentType: "application/json",
                //     dataType: "json",
                //     error: function (err) {
                //         let message = JSON.parse(err.responseText).message;
                //         $("#warningModal").modal();
                //         $("#txtWarningHeader").text("Error");
                //         $("#txtWarning").text(message);
                //
                //         console.log("Error : " + message)
                //     }
                // });

                $("#btnProfile").css('display', 'block');
                $("#btnProfile").text(cusDataObj.cus_name);

                $("#cus_nic").val(cusDataObj.cus_nic);
                $("#cus_name").val(cusDataObj.cus_name);
                $("#cus_address").val(cusDataObj.cus_address);
                $("#cus_contact").val(cusDataObj.cus_contact);
                $("#cus_email").val(cusDataObj.cus_email);

                let message = res.message;
                $("#warningModal").modal();
                $("#txtWarningHeader").text("Success");
                $("#txtWarning").text(res.message);

                $(".bd-settings-modal-lg").modal('hide');

                console.log("Success : " + message);
            },
            error: function (err) {
                let message = JSON.parse(err.responseText).message;
                $("#warningModal").modal();
                $("#txtWarningHeader").text("Error");
                $("#txtWarning").text(message);

                console.log("Error : " + message)
            }
        });
    });


</script>
</body>
</html>